{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
  <h1>Welcome, {{ user.username }}!</h1>
  <p>This is your practice dashboard ðŸŽ¸</p>

  <div style="display: flex; flex-direction: column; gap: 2rem;">
  
    <!-- Goals Section -->
    <div style="height: 50%; border-bottom: 1px solid #ccc;">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <h2>Goals</h2>
        <a href="{% url 'create_goal' %}">+ Add Goal</a>
      </div>
      <ul style="max-height: 300px; overflow-y: auto;">
        {% for goal in goals %}
          <li>
            <strong>{{ goal.title }}</strong><br>
            {% for key, target in goal.get_metrics.items %}
              {{ key|title }}: {{ target }}<br>
            {% endfor %}
            <a href="{% url 'goal_detail' goal.id %}">Details</a>
          </li>
        {% empty %}
         <li>No goals yet.</li>
        {% endfor %}
      </ul>
    </div>
  
    <!-- Practice Sessions Section -->
    <div>
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <h2>Practice Sessions</h2>
        <a href="{% url 'create_session' %}">+ Log Practice</a>
      </div>
      <ul style="max-height: 300px; overflow-y: auto;">
        {% for session in sessions %}
          <li>
            <a href="{% url 'session_detail' session.pk %}">
              {{ session.date|date:"M d, Y" }} â€” {{ session.duration }} min
              {% if session.goal %}(Goal: {{ session.goal.title }}){% endif %}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
  
  </div>
{% endblock %}