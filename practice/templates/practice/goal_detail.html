{% extends 'base.html' %}

{% block title %}Goal: {{ goal.title }}{% endblock %}

{% block content %}
  <h2>{{ goal.title }}</h2>

  <p><strong>Description:</strong> {{ goal.description|default:"(No description)" }}</p>

  {% if goal.target_date %}
    <p><strong>Target date:</strong> {{ goal.target_date }}</p>
  {% endif %}

  {% if goal.is_standard %}
    <h4>Standard Goal</h4>
    <p><strong>Category:</strong> {{ goal.standard_goal.get_category_display }}</p>
    <p><strong>Tracked Metrics:</strong>
      {{ goal.standard_goal.metrics|join:", " }}
    </p>
  {% endif %}

  <hr>

  <h3>Progress</h3>
  <div>
    <!-- Placeholder: You can replace this with a progress bar later -->
    <p><em>Progress tracking coming soon...</em></p>
  </div>

  <hr>

  <h3>Practice Sessions</h3>

  {% if sessions %}
    <ul>
      {% for session in sessions %}
        <li>
          {{ session.date|date:"Y-m-d H:i" }} –
          {{ session.duration }} min –
          Tempo: {{ session.tempo|default:"-" }},
          Mistakes: {{ session.mistakes|default:"-" }},
          Accuracy: {{ session.accuracy|default:"-" }}%
          <br>
          Notes: {{ session.notes|default:"(none)" }}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No practice sessions logged for this goal yet.</p>
  {% endif %}

  <hr>

  <a href="{% url 'create_session_for_goal' goal.id %}" class="btn btn-primary">➕ Log Practice Session</a>
  <br><br>
  <a href="{% url 'dashboard' %}">← Back to Dashboard</a>
{% endblock %}